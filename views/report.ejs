<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReportLine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <style>
.content {
  background-color: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

#report-heading {
  font-family: 'Merriweather', serif;
  font-size: 2.5rem;
  color: #8b0000;
  text-align: center;
  margin-bottom: 1rem;
}

/* p {
  font-size: 1.1rem;
  color: #333;
  text-align: center;
  margin-bottom: 2rem;
} */

.icon-container {
  width: 80px;
  height: 80px;
  margin: 0 auto 2rem;
}

.incident-types {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 2rem;
}

.incident-type {
  padding: 1rem;
  border-radius: 10px;
  background-color: white;
  color: #333;
  font-weight: 600;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.incident-type:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.incident-type.active {
  background-color: #36373d;
  color: white;
}

.incident-type svg {
  width: 24px;
  height: 24px;
  margin-right: 0.5rem;
}

.report-form {
  background-color: rgba(255, 255, 255, 0.7);
  border-radius: 10px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.report-form h2 {
  font-size: 1.5rem;
  color: #333;
  margin-bottom: 1rem;
}

.form-group {
  margin-bottom: 1rem;
}

.form-group label {
  display: block;
  font-size: 0.9rem;
  color: #555;
  margin-bottom: 0.5rem;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-size: 1rem;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #ff4500;
  box-shadow: 0 0 0 2px rgba(255, 69, 0, 0.2);
}

input#date{
  text-transform: uppercase;
}
.submit-btn {
  display: block;
  width: 100%;
  max-width: 200px;
  margin: 0 auto;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(to right, #2400ff, #ff4771);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.submit-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.submit-btn svg {
  width: 20px;
  height: 20px;
  margin-right: 0.5rem;
}

    </style>
</head>
<body>
    <!-- Navbar -->
<!-- Navbar -->
<nav class="navbar navbar-custom">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="photos/logo1.jpg" alt="Logo" width="30" height="30" class="d-inline-block align-top"> ReportLine
        </a>
        <div class="d-flex">
            <!-- Update href for backend routes -->
            <a class="nav-link" href="/home">Home</a>
            <a class="nav-link" href="/report">Report</a> <!-- Redirects to /report -->
            <a class="nav-link" href="/track-report">Track</a> <!-- Redirects to /track -->
            <a class="nav-link" href="/nhelp">Help</a> <!-- Redirects to /help -->
            <a class="nav-link" href="/">Logout</a>
        </div>
    </div>
</nav>


<!-- Report Form Section -->
<div class="content">
    <h1 id="report-heading">Issue A Report</h1>`
    <!-- <p>Quickly and efficiently report any incidents to ensure prompt resolution and maintain safety.</p> -->
    
    <div class="icon-container">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="alert-triangle">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
    </div>
    
    <div class="incident-types">
        <div class="incident-type" data-type="Software">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Software
        </div>
        <div class="incident-type" data-type="Hardware">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            Hardware
        </div>
    </div>
    
    <div class="report-form">
        <h2 id="report-details">Report Details</h2>
        <form id="incidentForm" action="/submit-report" method="POST">
            <input type="hidden" id="user_id" name="user_id" value="<%= user_id %>"> <!-- User ID passed from backend -->
            <input type="hidden" id="incident_type" name="incident_type" value=""> <!-- Hidden field to store incident type -->
            
            <div class="form-group">
                <label for="title">Incident Title</label>
                <input type="text" id="title" name="title" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="3" required></textarea>
            </div>
            <div class="form-group">
                <label for="date">Date of Incident</label>
                <input type="date" id="date" name="date" required>
            </div>
            <button type="submit" class="submit-btn">
                Submit Report
            </button>
        </form>
    </div>
</div>

<!-- JavaScript to handle incident type selection -->
<script>
    // Add event listeners to each incident type to capture the selected type
    document.querySelectorAll('.incident-type').forEach(item => {
        item.addEventListener('click', function() {
            // Set the value of the hidden input for incident_type based on the clicked div's data-type
            const incidentType = item.getAttribute('data-type');
            document.getElementById('incident_type').value = incidentType;
        });
    });

    // Optional: You can add a default incident type if no selection is made
    document.addEventListener("DOMContentLoaded", function() {
        // Set a default if none selected; e.g., set to "Safety" by default
        if (!document.getElementById('incident_type').value) {
            document.getElementById('incident_type').value = "Software";
        }
    });
</script>

    <!-- Footer -->
    <footer>
        <!-- <p>&copy; 2024 Incident Reporting System</p> -->
        <div class="foot-panel4">
            <!-- <div class="pages">
                <a>Conditions of Use & Sale</a>
                <a>Privacy Notice</a>
                <a>Internet-Based Ads</a>
            </div> -->
            <div class="copyright">
                Â© 2024, ReportLine, Incident Report System, Inc. or its affiliates
            </div>
        </div>
    </footer>
     
    <script src="js/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Handle incident type selection
 const incidentTypes = document.querySelectorAll('.incident-type');
 let selectedType = '';

incidentTypes.forEach(type => {
    type.addEventListener('click', () => {
        incidentTypes.forEach(t => t.classList.remove('active'));
        type.classList.add('active');
        selectedType = type.dataset.type;
    });
});

// Handle form submission
function submitReport() {
    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;
    const date = document.getElementById('date').value;

if (!selectedType || !title || !description || !date) {
    alert('Please fill in all fields and select an incident type.');
    return;
}

 // Send this data to console of vscode (send this data to a server)
 console.log('Incident Report:', {
     type: selectedType,
     title,
     description,
     date
 });

 alert('Incident report submitted successfully!');
            
 // Reset form
 document.getElementById('incidentForm').reset();
 incidentTypes.forEach(t => t.classList.remove('active'));
 selectedType = '';
}

document.getElementById("logout").addEventListener("click", function() {
    if (confirm("Are you sure you want to logout?")) {
      window.location.href = "/"; 
    }
});
    </script>
</body>
</html>
